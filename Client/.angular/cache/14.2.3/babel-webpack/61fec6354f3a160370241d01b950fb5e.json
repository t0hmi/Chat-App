{"ast":null,"code":"import { first } from 'rxjs';\nimport { ChannelActions } from 'src/app/store/channel';\nimport { ChannelSelector } from 'src/app/store/channel/channel.selector';\nimport { UserActions } from 'src/app/store/user';\nimport { UserSelector } from 'src/app/store/user/user.selector';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"src/app/services/auth.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../chat-sidebar/chat-sidebar.component\";\nimport * as i5 from \"../chat-message/chat-message.component\";\n\nfunction ChatMainComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"app-chat-sidebar\", 1);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"h3\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 4)(8, \"div\", 5);\n    i0.ɵɵelement(9, \"app-chat-message\", 6)(10, \"app-chat-message\", 6)(11, \"app-chat-message\", 6)(12, \"app-chat-message\", 6)(13, \"app-chat-message\", 6)(14, \"app-chat-message\", 6)(15, \"app-chat-message\", 6)(16, \"app-chat-message\", 6)(17, \"app-chat-message\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 7);\n    i0.ɵɵelement(19, \"textarea\", 8);\n    i0.ɵɵelementStart(20, \"div\", 9);\n    i0.ɵɵelement(21, \"img\", 10);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const data_r1 = ctx.ngIf;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"email\", data_r1.user == null ? null : data_r1.user.email)(\"channels\", i0.ɵɵpipeBind1(2, 21, ctx_r0.channels$));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(data_r1.activeChannel == null ? null : data_r1.activeChannel.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"username\", data_r1.user == null ? null : data_r1.user.email)(\"message\", \"Bonjour je mapelle thomas hamon et cest mon premier message sur le chat je suis tres content detre ici avec vous :) !\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"username\", data_r1.user == null ? null : data_r1.user.email)(\"message\", \"Bonjour je mapelle thomas hamon et cest mon premier message sur le chat je suis tres content detre ici avec vous :) !\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"username\", data_r1.user == null ? null : data_r1.user.email)(\"message\", \"Bonjour je mapelle thomas hamon et cest mon premier message sur le chat je suis tres content detre ici avec vous :) !\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"username\", data_r1.user == null ? null : data_r1.user.email)(\"message\", \"Bonjour je mapelle thomas hamon et cest mon premier message sur le chat je suis tres content detre ici avec vous :) !\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"username\", data_r1.user == null ? null : data_r1.user.email)(\"message\", \"Bonjour je mapelle thomas hamon et cest mon premier message sur le chat je suis tres content detre ici avec vous :) !\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"username\", data_r1.user == null ? null : data_r1.user.email)(\"message\", \"Bonjour je mapelle thomas hamon et cest mon premier message sur le chat je suis tres content detre ici avec vous :) !\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"username\", data_r1.user == null ? null : data_r1.user.email)(\"message\", \"Bonjour je mapelle thomas hamon et cest mon premier message sur le chat je suis tres content detre ici avec vous :) !\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"username\", data_r1.user == null ? null : data_r1.user.email)(\"message\", \"Bonjour je mapelle thomas hamon et cest mon premier message sur le chat je suis tres content detre ici avec vous :) !\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"username\", data_r1.user == null ? null : data_r1.user.email)(\"message\", \"Bonjour je mapelle thomas hamon et cest mon premier message sur le chat je suis tres content detre ici avec vous :) !\");\n  }\n}\n\nconst _c0 = function (a0, a1, a2) {\n  return {\n    isLogged: a0,\n    user: a1,\n    activeChannel: a2\n  };\n};\n\nexport class ChatMainComponent {\n  constructor(store, authService) {\n    this.store = store;\n    this.authService = authService;\n    this.user$ = this.store.select(UserSelector.selectLoggedUser);\n    this.isLogged$ = this.store.select(UserSelector.selectIsLoggedIn);\n    this.channels$ = this.store.select(ChannelSelector.selectMappedChannel);\n    this.activeChannel$ = this.store.select(ChannelSelector.selectActiveChannel);\n  }\n\n  ngOnInit() {\n    this.store.select(UserSelector.selectIsLoggedIn).pipe(first()).subscribe(isLogged => {\n      if (!isLogged) {\n        this.store.dispatch(UserActions.tokenData());\n      }\n\n      this.store.dispatch(ChannelActions.loadChannels());\n    });\n  }\n\n}\n\nChatMainComponent.ɵfac = function ChatMainComponent_Factory(t) {\n  return new (t || ChatMainComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.AuthService));\n};\n\nChatMainComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ChatMainComponent,\n  selectors: [[\"app-chat-main\"]],\n  decls: 4,\n  vars: 11,\n  consts: [[4, \"ngIf\"], [3, \"email\", \"channels\"], [1, \"chat\"], [1, \"chat__header\"], [1, \"chat__content\"], [1, \"chat__messages\"], [3, \"username\", \"message\"], [1, \"chat__input\"], [\"type\", \"text\", \"rows\", \"1\", \"placeholder\", \"Type a message here\"], [1, \"send\"], [\"src\", \"/assets/send.svg\", \"alt\", \"\"]],\n  template: function ChatMainComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ChatMainComponent_ng_container_0_Template, 22, 23, \"ng-container\", 0);\n      i0.ɵɵpipe(1, \"async\");\n      i0.ɵɵpipe(2, \"async\");\n      i0.ɵɵpipe(3, \"async\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpureFunction3(7, _c0, i0.ɵɵpipeBind1(1, 1, ctx.isLogged$), i0.ɵɵpipeBind1(2, 3, ctx.user$), i0.ɵɵpipeBind1(3, 5, ctx.activeChannel$)));\n    }\n  },\n  dependencies: [i3.NgIf, i4.ChatSidebarComponent, i5.ChatMessageComponent, i3.AsyncPipe],\n  styles: [\"[_nghost-%COMP%] {\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  flex-direction: row;\\n}\\n\\n.chat[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 100%;\\n  background-color: #252329;\\n}\\n\\n.chat__header[_ngcontent-%COMP%] {\\n  height: 70px;\\n  padding: 18px 35px;\\n  box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\\n  color: #E0E0E0;\\n  display: flex;\\n  align-items: center;\\n}\\n\\n@media screen and (max-width: 600px) {\\n  .chat__header[_ngcontent-%COMP%] {\\n    padding-left: 80px;\\n  }\\n}\\n\\n.chat__content[_ngcontent-%COMP%] {\\n  position: relative;\\n  height: calc(100% - 70px);\\n  width: 90%;\\n  margin: 0 auto;\\n  display: flex;\\n}\\n\\n.chat__content[_ngcontent-%COMP%]   .chat__messages[_ngcontent-%COMP%] {\\n  margin-top: 35px;\\n  display: flex;\\n  min-width: 0;\\n  min-height: 0;\\n  flex-direction: column;\\n  justify-content: flex-end;\\n  gap: 35px;\\n  overflow-y: scroll;\\n  position: relative;\\n  height: calc(100% - 140px);\\n  background-color: red;\\n}\\n\\n.chat__content[_ngcontent-%COMP%]   .chat__input[_ngcontent-%COMP%] {\\n  position: absolute;\\n  width: 100%;\\n  left: 50%;\\n  bottom: 0;\\n  transform: translate(-50%, -50%);\\n}\\n\\n.chat__content[_ngcontent-%COMP%]   .chat__input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%] {\\n  width: 100%;\\n  background: #3C393F;\\n  border-radius: 8px;\\n  padding: 17px;\\n  color: #E0E0E0;\\n  padding-right: 50px;\\n}\\n\\n.chat__content[_ngcontent-%COMP%]   .chat__input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder {\\n  color: #828282;\\n}\\n\\n.chat__content[_ngcontent-%COMP%]   .chat__input[_ngcontent-%COMP%]   .send[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 50%;\\n  right: -9px;\\n  transform: translate(-50%, -50%);\\n  background-color: #2F80ED;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 9px;\\n  border-radius: 8px;\\n  cursor: pointer;\\n}\\n\\n.chat__content[_ngcontent-%COMP%]   .chat__input[_ngcontent-%COMP%]   .send[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\n  width: 20px;\\n  height: 20px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQtbWFpbi5jb21wb25lbnQuc2NzcyIsIi4uXFwuLlxcLi5cXHNjc3NcXF92YXJpYWJsZXMuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTtFQUNJLFdBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0FBREo7O0FBSUE7RUFDSSxXQUFBO0VBQ0EsWUFBQTtFQUNBLHlCQ0VPO0FESFg7O0FBR0k7RUFDSSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSwyQ0FBQTtFQUNBLGNDZE07RURlTixhQUFBO0VBQ0EsbUJBQUE7QUFEUjs7QUFHUTtFQUNJO0lBQ0csa0JBQUE7RUFEYjtBQUNGOztBQU1JO0VBQ0ksa0JBQUE7RUFDQSx5QkFBQTtFQUNBLFVBQUE7RUFDQSxjQUFBO0VBQ0EsYUFBQTtBQUpSOztBQU9RO0VBQ0ksZ0JBQUE7RUFDQSxhQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSxzQkFBQTtFQUNBLHlCQUFBO0VBQ0EsU0FBQTtFQUNBLGtCQUFBO0VBQ0Esa0JBQUE7RUFDQSwwQkFBQTtFQUNBLHFCQUFBO0FBTFo7O0FBUVE7RUFDSSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxTQUFBO0VBQ0EsU0FBQTtFQUNBLGdDQUFBO0FBTlo7O0FBUVk7RUFDSSxXQUFBO0VBQ0EsbUJBQUE7RUFDQSxrQkFBQTtFQUNBLGFBQUE7RUFDQSxjQzVERjtFRDZERSxtQkFBQTtBQU5oQjs7QUFPZ0I7RUFDSSxjQUFBO0FBTHBCOztBQVNZO0VBQ0ksa0JBQUE7RUFDQSxRQUFBO0VBQ0EsV0FBQTtFQUNBLGdDQUFBO0VBQ0EseUJDNUVOO0VENkVNLGFBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0VBQ0EsWUFBQTtFQUNBLGtCQUFBO0VBQ0EsZUFBQTtBQVBoQjs7QUFTZ0I7RUFDSSxXQUFBO0VBQ0EsWUFBQTtBQVBwQiIsImZpbGUiOiJjaGF0LW1haW4uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0ICcuLi8uLi8uLi9zY3NzL3ZhcmlhYmxlcyc7XHJcblxyXG46aG9zdHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XHJcbn1cclxuXHJcbi5jaGF0IHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogJGNoYXQtYmc7XHJcblxyXG4gICAgJl9faGVhZGVyIHtcclxuICAgICAgICBoZWlnaHQ6IDcwcHg7XHJcbiAgICAgICAgcGFkZGluZzogMThweCAzNXB4O1xyXG4gICAgICAgIGJveC1zaGFkb3c6IDBweCA0cHggNHB4IHJnYmEoMCwgMCwgMCwgMC4yNSk7XHJcbiAgICAgICAgY29sb3I6ICRtYWluLWNvbG9yO1xyXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuXHJcbiAgICAgICAgQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNjAwcHgpIHtcclxuICAgICAgICAgICAgJiB7XHJcbiAgICAgICAgICAgICAgIHBhZGRpbmctbGVmdDogODBweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgJl9fY29udGVudCB7XHJcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgIGhlaWdodDogY2FsYygxMDAlIC0gNzBweCk7XHJcbiAgICAgICAgd2lkdGg6IDkwJTtcclxuICAgICAgICBtYXJnaW46IDAgYXV0bztcclxuICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG5cclxuICAgICAgICBcclxuICAgICAgICAuY2hhdF9fbWVzc2FnZXMge1xyXG4gICAgICAgICAgICBtYXJnaW4tdG9wOiAzNXB4O1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICBtaW4td2lkdGg6MDtcclxuICAgICAgICAgICAgbWluLWhlaWdodDogMDtcclxuICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcclxuICAgICAgICAgICAgZ2FwOiAzNXB4O1xyXG4gICAgICAgICAgICBvdmVyZmxvdy15OiBzY3JvbGw7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1xyXG4gICAgICAgICAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDE0MHB4KTtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmNoYXRfX2lucHV0IHtcclxuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICAgICAgbGVmdDogNTAlO1xyXG4gICAgICAgICAgICBib3R0b206IDA7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsLTUwJSk7XHJcblxyXG4gICAgICAgICAgICB0ZXh0YXJlYSB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICMzQzM5M0Y7XHJcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxN3B4O1xyXG4gICAgICAgICAgICAgICAgY29sb3I6ICRtYWluLWNvbG9yO1xyXG4gICAgICAgICAgICAgICAgcGFkZGluZy1yaWdodDogNTBweDtcclxuICAgICAgICAgICAgICAgICY6OnBsYWNlaG9sZGVyIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzgyODI4MjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLnNlbmQge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICAgICAgdG9wOiA1MCU7XHJcbiAgICAgICAgICAgICAgICByaWdodDogLTlweDtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsLTUwJSk7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkY3RhLWJnO1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDlweDtcclxuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcclxuXHJcbiAgICAgICAgICAgICAgICBpbWcge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjBweDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIkY3RhLWJnIDogIzJGODBFRDtcclxuJGN0YS1mb250IDogd2hpdGU7XHJcbiRjdGEtcmFkaXVzIDogOHB4O1xyXG5cclxuJG1haW4tY29sb3IgOiAjRTBFMEUwO1xyXG4kc2Vjb25kYXJ5LWNvbG9yIDogIzgyODI4MjtcclxuJGxpbmstY29sb3I6ICMyRDlDREI7XHJcblxyXG4kYm9yZGVyLWNvbG9yOiAjQkRCREJEO1xyXG4kYmFja2dyb3VuZC1jb2xvciA6ICMzMzMzMzM7XHJcblxyXG4kc2lkZWJhci1iZyA6IzEyMEYxMztcclxuJHNpZGViYXItZm9udDogI2ZmZmZmZjtcclxuXHJcbiRjaGF0LWJnIDogIzI1MjMyOTtcclxuIl19 */\"]\n});","map":{"version":3,"mappings":"AAEA,SAASA,KAAT,QAAsB,MAAtB;AAEA,SAASC,cAAT,QAA+B,uBAA/B;AACA,SAASC,eAAT,QAAgC,wCAAhC;AACA,SAASC,WAAT,QAA4B,oBAA5B;AACA,SAASC,YAAT,QAA6B,kCAA7B;;;;;;;;;;ICPAC;IAKAA;;IACAA,+BAAkB,CAAlB,EAAkB,KAAlB,EAAkB,CAAlB,EAAkB,CAAlB,EAAkB,IAAlB;IAEYA;IAA4BA;IAEpCA,+BAA2B,CAA3B,EAA2B,KAA3B,EAA2B,CAA3B;IAEYA,uCAAuM,EAAvM,EAAuM,kBAAvM,EAAuM,CAAvM,EAAuM,EAAvM,EAAuM,kBAAvM,EAAuM,CAAvM,EAAuM,EAAvM,EAAuM,kBAAvM,EAAuM,CAAvM,EAAuM,EAAvM,EAAuM,kBAAvM,EAAuM,CAAvM,EAAuM,EAAvM,EAAuM,kBAAvM,EAAuM,CAAvM,EAAuM,EAAvM,EAAuM,kBAAvM,EAAuM,CAAvM,EAAuM,EAAvM,EAAuM,kBAAvM,EAAuM,CAAvM,EAAuM,EAAvM,EAAuM,kBAAvM,EAAuM,CAAvM;IASRA;IACAA;IACIA;IACAA;IACIA;IACJA;IAIZA;;;;;;IAzBkBA;IAAAA,yEAA0B,UAA1B,EAA0BA,uCAA1B;IAGNA;IAAAA;IAIsBA;IAAAA,4EAA6B,SAA7B,EAA6B,uHAA7B;IACAA;IAAAA,4EAA6B,SAA7B,EAA6B,uHAA7B;IACAA;IAAAA,4EAA6B,SAA7B,EAA6B,uHAA7B;IACAA;IAAAA,4EAA6B,SAA7B,EAA6B,uHAA7B;IACAA;IAAAA,4EAA6B,SAA7B,EAA6B,uHAA7B;IACAA;IAAAA,4EAA6B,SAA7B,EAA6B,uHAA7B;IACAA;IAAAA,4EAA6B,SAA7B,EAA6B,uHAA7B;IACAA;IAAAA,4EAA6B,SAA7B,EAA6B,uHAA7B;IACAA;IAAAA,4EAA6B,SAA7B,EAA6B,uHAA7B;;;;;;;;;;;;ADNlC,OAAM,MAAOC,iBAAP,CAAwB;EAE5BC,YAAoBC,KAApB,EAA2CC,WAA3C,EAAoE;IAAhD;IAAuB;IAE3C,aAAQ,KAAKD,KAAL,CAAWE,MAAX,CAAkBN,YAAY,CAACO,gBAA/B,CAAR;IACA,iBAAY,KAAKH,KAAL,CAAWE,MAAX,CAAkBN,YAAY,CAACQ,gBAA/B,CAAZ;IACA,iBAAY,KAAKJ,KAAL,CAAWE,MAAX,CAAkBR,eAAe,CAACW,mBAAlC,CAAZ;IACA,sBAAiB,KAAKL,KAAL,CAAWE,MAAX,CAAkBR,eAAe,CAACY,mBAAlC,CAAjB;EALyE;;EAOzEC,QAAQ;IAEN,KAAKP,KAAL,CAAWE,MAAX,CAAkBN,YAAY,CAACQ,gBAA/B,EAAiDI,IAAjD,CAAsDhB,KAAK,EAA3D,EAA+DiB,SAA/D,CAA0EC,QAAD,IAAa;MACpF,IAAG,CAACA,QAAJ,EAAc;QACZ,KAAKV,KAAL,CAAWW,QAAX,CAAoBhB,WAAW,CAACiB,SAAZ,EAApB;MACD;;MACD,KAAKZ,KAAL,CAAWW,QAAX,CAAoBlB,cAAc,CAACoB,YAAf,EAApB;IACD,CALD;EAMD;;AAjB2B;;;mBAAjBf,mBAAiBD;AAAA;;;QAAjBC;EAAiBgB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCd9BrB;;;;;;;MAAeA","names":["first","ChannelActions","ChannelSelector","UserActions","UserSelector","i0","ChatMainComponent","constructor","store","authService","select","selectLoggedUser","selectIsLoggedIn","selectMappedChannel","selectActiveChannel","ngOnInit","pipe","subscribe","isLogged","dispatch","tokenData","loadChannels","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\thomashamon_perso\\authentification\\src\\app\\components\\chat\\chat-main\\chat-main.component.ts","C:\\thomashamon_perso\\authentification\\src\\app\\components\\chat\\chat-main\\chat-main.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { first } from 'rxjs';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { ChannelActions } from 'src/app/store/channel';\nimport { ChannelSelector } from 'src/app/store/channel/channel.selector';\nimport { UserActions } from 'src/app/store/user';\nimport { UserSelector } from 'src/app/store/user/user.selector';\n\n@Component({\n  selector: 'app-chat-main',\n  templateUrl: './chat-main.component.html',\n  styleUrls: ['./chat-main.component.scss']\n})\nexport class ChatMainComponent implements OnInit {\n\n  constructor(private store : Store, private authService : AuthService) { }\n\n  user$ = this.store.select(UserSelector.selectLoggedUser);\n  isLogged$ = this.store.select(UserSelector.selectIsLoggedIn);\n  channels$ = this.store.select(ChannelSelector.selectMappedChannel);\n  activeChannel$ = this.store.select(ChannelSelector.selectActiveChannel);\n  \n  ngOnInit(): void {\n    \n    this.store.select(UserSelector.selectIsLoggedIn).pipe(first()).subscribe((isLogged) => {\n      if(!isLogged) {\n        this.store.dispatch(UserActions.tokenData());\n      }\n      this.store.dispatch(ChannelActions.loadChannels());\n    });\n  }\n\n\n\n}\n","<ng-container *ngIf=\"{\n    isLogged : isLogged$ | async,\n    user : user$ | async,\n    activeChannel : activeChannel$ | async\n} as data\">\n<app-chat-sidebar [email]=\"data.user?.email\" [channels]=\"channels$ | async\"></app-chat-sidebar>\n<div class=\"chat\">\n    <div class=\"chat__header\">\n        <h3>{{data.activeChannel?.name}}</h3>\n    </div>\n    <div class=\"chat__content\">\n        <div class=\"chat__messages\">\n                <app-chat-message [username]=\"data.user?.email\" [message]=\"'Bonjour je mapelle thomas hamon et cest mon premier message sur le chat je suis tres content detre ici avec vous :) !'\"></app-chat-message>\n                <app-chat-message [username]=\"data.user?.email\" [message]=\"'Bonjour je mapelle thomas hamon et cest mon premier message sur le chat je suis tres content detre ici avec vous :) !'\"></app-chat-message>\n                <app-chat-message [username]=\"data.user?.email\" [message]=\"'Bonjour je mapelle thomas hamon et cest mon premier message sur le chat je suis tres content detre ici avec vous :) !'\"></app-chat-message>\n                <app-chat-message [username]=\"data.user?.email\" [message]=\"'Bonjour je mapelle thomas hamon et cest mon premier message sur le chat je suis tres content detre ici avec vous :) !'\"></app-chat-message>\n                <app-chat-message [username]=\"data.user?.email\" [message]=\"'Bonjour je mapelle thomas hamon et cest mon premier message sur le chat je suis tres content detre ici avec vous :) !'\"></app-chat-message>\n                <app-chat-message [username]=\"data.user?.email\" [message]=\"'Bonjour je mapelle thomas hamon et cest mon premier message sur le chat je suis tres content detre ici avec vous :) !'\"></app-chat-message>\n                <app-chat-message [username]=\"data.user?.email\" [message]=\"'Bonjour je mapelle thomas hamon et cest mon premier message sur le chat je suis tres content detre ici avec vous :) !'\"></app-chat-message>\n                <app-chat-message [username]=\"data.user?.email\" [message]=\"'Bonjour je mapelle thomas hamon et cest mon premier message sur le chat je suis tres content detre ici avec vous :) !'\"></app-chat-message>\n                <app-chat-message [username]=\"data.user?.email\" [message]=\"'Bonjour je mapelle thomas hamon et cest mon premier message sur le chat je suis tres content detre ici avec vous :) !'\"></app-chat-message>\n        </div>\n        <div class=\"chat__input\">\n            <textarea type=\"text\" rows=\"1\" placeholder=\"Type a message here\"></textarea>\n            <div class=\"send\">\n                <img src=\"/assets/send.svg\" alt=\"\">\n            </div>\n        </div>\n    </div>\n</div>\n</ng-container>"]},"metadata":{},"sourceType":"module"}